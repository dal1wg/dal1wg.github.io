<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>dal1wg's blog</title><meta name="author" content="dal1wg"><meta name="copyright" content="dal1wg"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="dal1wg&#39;s blog">
<meta property="og:url" content="https://github.com/index.html">
<meta property="og:site_name" content="dal1wg&#39;s blog">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://github.com/img/avater-icon.png">
<meta property="article:author" content="dal1wg">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github.com/img/avater-icon.png"><link rel="shortcut icon" href="/img/webicon.png"><link rel="canonical" href="https://github.com/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'dal1wg\'s blog',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2025-08-08 10:08:20'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avater-icon.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">9</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">3</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page fixed" id="page-header" style="background-image: url('/img/avater-icon.png')"><nav id="nav"><span id="blog-info"><a href="/" title="dal1wg's blog"><span class="site-name">dal1wg's blog</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">dal1wg's blog</h1><div id="site_social_icons"><a class="social-icon" href="https://github.com/dal1wg" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:wxx210104@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2024/10/21/Redis4.0.11%20Cluster%E6%90%AD%E5%BB%BA%E5%8F%8A%E5%87%BA%E7%8E%B0%E9%97%AE%E9%A2%98/" title="Redis4.0.11 Cluster搭建及出现问题"><img class="post-bg" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Redis4.0.11 Cluster搭建及出现问题"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/10/21/Redis4.0.11%20Cluster%E6%90%AD%E5%BB%BA%E5%8F%8A%E5%87%BA%E7%8E%B0%E9%97%AE%E9%A2%98/" title="Redis4.0.11 Cluster搭建及出现问题">Redis4.0.11 Cluster搭建及出现问题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-10-21T12:39:24.501Z" title="Created 2024-10-21 20:39:24">2024-10-21</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/redis/">redis</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/redis-cluster/">redis-cluster</a></span></div><div class="content">一.系统环境os：Red Hat Enterprise Linux Server release 7.9 (Maipo)
Redis_version: 4.0.11
OpenSSL_version:1.1.1t  7 Feb 2023
server:192.168.101.15&#x2F;17&#x2F;19
二.集群规划将集群部署为三主三从的cluster集群



server
master
slave



192.168.101.15
16380
17380


192.168.101.17
16380
17380


192.168.101.19
16380
17380


三.部署过程（1）各节点运行实例本次集群部署过程中，在每个服务器创建了测试用户test2，避免在root目录下与其他的文件混淆
首先获取redis4.0.11版本源码wget  https://download.redis.io/releases/redis-4.0.11.tar.gz​，然后make​编译一下
将编译好的文件移至公司redis_all&#x2F;bin目录下，然后tar zcvf fil ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/10/21/%E6%97%B6%E9%92%9F%E4%B8%8D%E5%90%8C%E6%AD%A5%E4%B8%8B%E7%9A%84redis%20cluster(out%20range%20of%20repl-timeout)/" title="时钟不同步下的redis cluster(out range of repl-timeout)"><img class="post-bg" src="/assets/redis.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="时钟不同步下的redis cluster(out range of repl-timeout)"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/10/21/%E6%97%B6%E9%92%9F%E4%B8%8D%E5%90%8C%E6%AD%A5%E4%B8%8B%E7%9A%84redis%20cluster(out%20range%20of%20repl-timeout)/" title="时钟不同步下的redis cluster(out range of repl-timeout)">时钟不同步下的redis cluster(out range of repl-timeout)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-10-21T07:12:29.244Z" title="Created 2024-10-21 15:12:29">2024-10-21</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/redis/">redis</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/redis-cluster/">redis-cluster</a></span></div><div class="content">1 问题描述现有三台服务器，每个服务器部署两个redis-server服务，组成redis cluster。若其中一台服务器存在时钟偏差，与其他服务器存在30s以上偏差，测试该集群的状态(读写服务，持久化操作，故障转移)
2 测试实践1． 现有192.168.101.15&#x2F;17&#x2F;19服务器，每个服务器启动两个redis-server实例组成三主三从集群，确保集群服务正常，集群主从关系如下图
​​
​​
2． 在192.168.101.15服务器上执行sudo date -s “$(date -d ‘+5 minutes’ ‘+%Y-%m-%d %H:%M:%S’)”命令，使该服务器与其他服务器时钟不同步，测试集群服务，根据日志分析状态
3 测试结果3.1 集群状态集群依然提供服务，各节点主从关系未发生变化且正常服务。
​​
3.2 主从节点状态
主节点

192.168.101.19:17380 master无特殊日志信息
192.168.101.19:16380 master出现与从节点15:17380失联，从节点请求同步，主节点同意并同步偏移量
​​
192.1 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/09/18/Codis%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/" title="Codis安装部署"><img class="post-bg" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Codis安装部署"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/09/18/Codis%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/" title="Codis安装部署">Codis安装部署</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-09-17T23:12:00.000Z" title="Created 2024-09-18 07:12:00">2024-09-18</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/redis/">redis</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Codis/">Codis</a></span></div><div class="content">Codis架构结构及工作工程1.codis架构结构及组件redis codis模型架构如下图所示，其核心组件由四部分——proxy,group,dashboard,zookeeper构成。
​​
下面将介绍每个组件负责的功能。

​Proxy：Codis的Proxy组件承担了请求的转发工作，它位于客户端与Redis集群之间，实现了对Redis操作的透明化。Proxy组件通过解析客户端发送的请求，根据配置的路由规则，将请求转发给相应的Redis实例。同时，Proxy还承担了故障恢复、数据迁移等任务。​
​Group：Codis的Redis集群是由多个Redis实例组成的，每个实例运行在不同的物理节点上。这些实例被分为若干个slot，每个slot负责处理特定的key范围。通过将key映射到不同的slot上，可以实现key的分布式存储和读写分离。​
​Zookeeper：Zookeeper是Codis集群的管理组件，负责存储和管理集群的元数据信息，包括Redis实例的地址、slot的映射关系等。同时，Zookeeper还提供了故障恢复和数据迁移等功能。​
​dashbaord：统一的控制中心 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/09/08/%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/" title="贪心算法常见内容介绍"><img class="post-bg" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="贪心算法常见内容介绍"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/09/08/%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/" title="贪心算法常见内容介绍">贪心算法常见内容介绍</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-09-08T14:04:39.381Z" title="Created 2024-09-08 22:04:39">2024-09-08</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AE%97%E6%B3%95/">算法</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/algorithm/">algorithm</a></span></div><div class="content">1 贪心算法介绍贪心算法，又名贪婪法，是寻找最优解问题的常用方法，这种方法模式一般将求解过程分成若干个步骤，但每个步骤都应用贪心原则，选取当前状态下最好&#x2F;最优的选择（局部最有利的选择），并以此希望最后堆叠出的结果也是最好&#x2F;最优的解。
贪婪法的基本步骤：
步骤 1：从某个初始解出发；步骤 2：采用迭代的过程，当可以向目标前进一步时，就根据局部最优策略，得到一部分解，缩小问题规模；步骤 3：将所有解综合起来。
2 贪心实例-最短路​​
最短路算法总结（超详细~）-CSDN 博客
2.1 dijkstra
每次从未标记的节点中寻找距离出发点最近的节点，标记，收录到最优路径集合中
计算刚加入的节点 A 到相邻节点 B 的距离，不包括已标记的节点
若 节点A到源点的距离​ + 节点A到节点B的边长​ &lt; 节点B到源点的距离​，更新节点 B 到源点的值
重复以上步骤，直到未标记的节点未空时，停止算法

【算法】最短路径查找—Dijkstra 算法_哔哩哔哩_bilibili
1234567891011121314void dijkstra(int dist[], bool ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/09/08/%E5%9F%BA%E4%BA%8ERedis-shake%E7%9A%84redis%E9%9B%86%E7%BE%A4%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB/" title="基于Redis-shake的redis集群数据迁移"><img class="post-bg" src="/assets/redis.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="基于Redis-shake的redis集群数据迁移"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/09/08/%E5%9F%BA%E4%BA%8ERedis-shake%E7%9A%84redis%E9%9B%86%E7%BE%A4%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB/" title="基于Redis-shake的redis集群数据迁移">基于Redis-shake的redis集群数据迁移</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-09-08T12:46:28.197Z" title="Created 2024-09-08 20:46:28">2024-09-08</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/redis/">redis</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/redis-tools/">redis tools</a></span></div><div class="content">

1 实验环境Redis Version:6.2.14
Redis Cluster Installer: redis-console-manager-0.2.3-20240905
Source os: Red Hat Enterprise Linux Server release 7.9 (Maipo)
Target os:Red Hat Enterprise Linux release 8.5 (Ootpa)
Source Redis Cluster：192.168.101.15&#x2F;17&#x2F;19：16380&#x2F;17380(ip:port)
Target Redis Cluster：192.168.101.20&#x2F;205&#x2F;206：16380&#x2F;17380(ip:port)
2 环境搭建2.1 Redis-cluster在源服务器上192.168.101.15&#x2F;17&#x2F;19以及目标服务器192.168.101.20&#x2F;205&#x2F;206上搭建redis-cluster集群，使用redis-console- ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/09/08/BigKey%E5%92%8CHotKey%E7%9B%B8%E5%85%B3%E5%86%85%E5%AE%B9/" title="BigKey和HotKey相关内容"><img class="post-bg" src="/assets/19190750.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BigKey和HotKey相关内容"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/09/08/BigKey%E5%92%8CHotKey%E7%9B%B8%E5%85%B3%E5%86%85%E5%AE%B9/" title="BigKey和HotKey相关内容">BigKey和HotKey相关内容</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-09-08T05:08:52.000Z" title="Created 2024-09-08 13:08:52">2024-09-08</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/redis/">redis</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/redis/">redis</a></span></div><div class="content">1 BigKey1.1 定义通常以Key的大小和Key中成员的数量来综合判定，例如：

Key本身的数据量过大：一个String类型的Key，它的值为5 MB。
Key中的成员数过多：一个ZSET类型的Key，它的成员数量为10,000个。
Key中成员的数据量过大：一个Hash类型的Key，它的成员数量虽然只有2,000个但这些成员的Value（值）总大小为100 MB。

1.2 问题在redis中出现BigKey情况会出现以下几种问题：

客户端执行命令的时长变慢。
Redis内存达到maxmemory参数定义的上限引发操作阻塞或重要的Key被逐出，甚至引发内存溢出（Out Of Memory）。
集群架构下，某个数据分片的内存使用率远超其他数据分片，无法使数据分片的内存资源达到均衡。
对大Key执行读请求，会使Redis实例的带宽使用率被占满，导致自身服务变慢，同时易波及相关的服务。
对大Key执行删除操作，易造成主库较长时间的阻塞，进而可能引发同步中断或主从切换。

1.3 原因对于redis出现BigKey的情况的原因有未正确使用Redis、业务规划不足、无效数据的堆积、访 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/09/05/%E5%85%B3%E4%BA%8Esocketaddr%E4%B8%AD%E7%BD%91%E7%BB%9C%E5%AD%97%E8%8A%82%E5%BA%8F/" title="关于socketaddr中网络字节序"><img class="post-bg" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="关于socketaddr中网络字节序"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/09/05/%E5%85%B3%E4%BA%8Esocketaddr%E4%B8%AD%E7%BD%91%E7%BB%9C%E5%AD%97%E8%8A%82%E5%BA%8F/" title="关于socketaddr中网络字节序">关于socketaddr中网络字节序</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-09-05T08:28:04.335Z" title="Created 2024-09-05 16:28:04">2024-09-05</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/SOCKET/">SOCKET</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/C-Socket/">C++/Socket</a></span></div><div class="content">在使用socket建立通讯时，需要将套接字与设备端口链接起来，如使用bind()。
123#include &lt;sys/types.h&gt;#include &lt;sys/socket.h&gt;int bind(int sockfd, struct sockaddr *my_addr, int addrlen);

而在使用bind()时，其中关键的是my_addr(指向struct sockaddr的指针)，其记录了端口与设备号。
1234567struct sockaddr_in &#123;　　short int sin_family; /* 通信类型 */　　unsigned short int sin_port; /* 端口 */　　struct in_addr sin_addr; /* Internet 地址 */　　unsigned char sin_zero[8]; /* 与sockaddr结构的长度相同*/&#125;;

在struct sockaddr_in中，sin_port就是网络字节序。
关于字节序，其实质上就是字节在存储时的排列顺序。其种类可分为 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/09/05/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" title="动态规划"><img class="post-bg" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="动态规划"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/09/05/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" title="动态规划">动态规划</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-09-05T08:11:52.131Z" title="Created 2024-09-05 16:11:52">2024-09-05</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AE%97%E6%B3%95/">算法</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/algorithm/">algorithm</a></span></div><div class="content">完全背包
最直接版完全背包
1234567int n,m; cin&gt;&gt;n&gt;&gt;m;for(int i=1;i&lt;=n;i++) cin&gt;&gt;w[i]&gt;&gt;c[i];for(int i=1;i&lt;=n;i++)	for(int j=1;j&lt;m;j++)		for(int k=0;k&lt;j/w[i];k++)			dp[j]=max(dp[j],dp[j-k*w[i]]+k*c[i]);cout&lt;&lt;dp[m];
优化版二维完全背包
在完全背包问题中，物品可多项选择，及可以竖向转移—在未添加新物品时该容量下的值(01 背包问题原理)，和竖向转移—在添加新物品的情况加进行动态规划(及在 j-W[i]的背包大小所对应的值加上 C[i]值)，然后取最大值。
12345678int n,m; cin&gt;&gt;n&gt;&gt;m;for(int i=1;i&lt;=n;i++) cin&gt;&gt;w[i]&gt;&gt;c[i];for(int i=1;i&lt;=n;i++)	for(int j=1;j&lt;m;j ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/09/04/hello-world/" title="Hello World"><img class="post-bg" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hello World"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/09/04/hello-world/" title="Hello World">Hello World</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-09-04T07:06:19.073Z" title="Created 2024-09-04 15:06:19">2024-09-04</time></span></div><div class="content">Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.
Quick StartCreate a new post1$ hexo new &quot;My New Post&quot;

More info: Writing
Run server1$ hexo server

More info: Server
Generate static files1$ hexo generate

More info: Generating
Deploy to remote sites1$ hexo deploy

More info: Deployment
</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avater-icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">dal1wg</div><div class="author-info__description">An aspiring rookie programmer learning computer science.</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">9</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">3</div></a></div><a id="card-info-btn" href="https://github.com/dal1wg"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/dal1wg" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:wxx210104@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Welcome to dal1wg's blog.</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/10/21/Redis4.0.11%20Cluster%E6%90%AD%E5%BB%BA%E5%8F%8A%E5%87%BA%E7%8E%B0%E9%97%AE%E9%A2%98/" title="Redis4.0.11 Cluster搭建及出现问题"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Redis4.0.11 Cluster搭建及出现问题"/></a><div class="content"><a class="title" href="/2024/10/21/Redis4.0.11%20Cluster%E6%90%AD%E5%BB%BA%E5%8F%8A%E5%87%BA%E7%8E%B0%E9%97%AE%E9%A2%98/" title="Redis4.0.11 Cluster搭建及出现问题">Redis4.0.11 Cluster搭建及出现问题</a><time datetime="2024-10-21T12:39:24.501Z" title="Created 2024-10-21 20:39:24">2024-10-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/21/%E6%97%B6%E9%92%9F%E4%B8%8D%E5%90%8C%E6%AD%A5%E4%B8%8B%E7%9A%84redis%20cluster(out%20range%20of%20repl-timeout)/" title="时钟不同步下的redis cluster(out range of repl-timeout)"><img src="/assets/redis.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="时钟不同步下的redis cluster(out range of repl-timeout)"/></a><div class="content"><a class="title" href="/2024/10/21/%E6%97%B6%E9%92%9F%E4%B8%8D%E5%90%8C%E6%AD%A5%E4%B8%8B%E7%9A%84redis%20cluster(out%20range%20of%20repl-timeout)/" title="时钟不同步下的redis cluster(out range of repl-timeout)">时钟不同步下的redis cluster(out range of repl-timeout)</a><time datetime="2024-10-21T07:12:29.244Z" title="Created 2024-10-21 15:12:29">2024-10-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/18/Codis%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/" title="Codis安装部署"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Codis安装部署"/></a><div class="content"><a class="title" href="/2024/09/18/Codis%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/" title="Codis安装部署">Codis安装部署</a><time datetime="2024-09-17T23:12:00.000Z" title="Created 2024-09-18 07:12:00">2024-09-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/08/%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/" title="贪心算法常见内容介绍"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="贪心算法常见内容介绍"/></a><div class="content"><a class="title" href="/2024/09/08/%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/" title="贪心算法常见内容介绍">贪心算法常见内容介绍</a><time datetime="2024-09-08T14:04:39.381Z" title="Created 2024-09-08 22:04:39">2024-09-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/08/%E5%9F%BA%E4%BA%8ERedis-shake%E7%9A%84redis%E9%9B%86%E7%BE%A4%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB/" title="基于Redis-shake的redis集群数据迁移"><img src="/assets/redis.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="基于Redis-shake的redis集群数据迁移"/></a><div class="content"><a class="title" href="/2024/09/08/%E5%9F%BA%E4%BA%8ERedis-shake%E7%9A%84redis%E9%9B%86%E7%BE%A4%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB/" title="基于Redis-shake的redis集群数据迁移">基于Redis-shake的redis集群数据迁移</a><time datetime="2024-09-08T12:46:28.197Z" title="Created 2024-09-08 20:46:28">2024-09-08</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/SOCKET/"><span class="card-category-list-name">SOCKET</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/redis/"><span class="card-category-list-name">redis</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E7%AE%97%E6%B3%95/"><span class="card-category-list-name">算法</span><span class="card-category-list-count">2</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/redis-tools/" style="font-size: 1.1em; color: #999">redis tools</a> <a href="/tags/C-Socket/" style="font-size: 1.1em; color: #999">C++/Socket</a> <a href="/tags/Codis/" style="font-size: 1.1em; color: #999">Codis</a> <a href="/tags/redis/" style="font-size: 1.1em; color: #999">redis</a> <a href="/tags/algorithm/" style="font-size: 1.5em; color: #99a9bf">algorithm</a> <a href="/tags/redis-cluster/" style="font-size: 1.5em; color: #99a9bf">redis-cluster</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/10/"><span class="card-archive-list-date">October 2024</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/09/"><span class="card-archive-list-date">September 2024</span><span class="card-archive-list-count">7</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">9</div></div><div class="webinfo-item"><div class="item-name">Runtime :</div><div class="item-count" id="runtimeshow" data-publishDate="2025-08-08T02:08:20.620Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">UV :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">PV :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Last Update :</div><div class="item-count" id="last-push-date" data-lastPushDate="2025-08-08T02:08:20.620Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/avater-icon.png')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By dal1wg</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>